# bgzf-filehandle

[![NPM version](https://img.shields.io/npm/v/bgzf-filehandle.svg?style=flat-square)](https://npmjs.org/package/bgzf-filehandle)
[![Build Status](https://img.shields.io/travis/gmod/bgzf-filehandle/master.svg?style=flat-square)](https://travis-ci.org/gmod/bgzf-filehandle) 

Transparently read block-gzipped (BGZF) files that have .gzi indexes as if they were regular uncompressed files.

## Install

    $ npm install --save bgzf-filehandle

## Usage

```js
const {BgzfFilehandle} = require('bgzf-filehandle')

const f = new BgzfFilehandle({path: 'path/to/my_file.gz'})
// assumes a .gzi index exists at path/to/my_file.gz.gzi

// supports a subset of NodeJS v10 filehandle API. currently
// just read() and stat()
const buf = 
f.read()

fs.readFile('path/to/data.vcf.idx', (err, buffer) => {
  const index = read(buffer);

  console.log(index.header)
  const blocks = index.getBlocks("ctgA",123000,456000)

  // can now use these blocks from the index to read the file
  // regions of interest
  fs.open('path/to/data.vcf', 'r', (err, fd) => {
    if (err) throw err
    blocks.forEach(({ length, offset }) => {
      const buffer = Buffer.alloc(length)
      fs.read(fd, buffer, 0, length, offset, (err, buffer) => {
        console.log('got file data', buffer)
      })
    })
    fs.close(fd, (err) => {
      if (err) throw err
    })
  })
})
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

## License

MIT Â© [Robert Buels](https://github.com/rbuels)
